<!DOCTYPE html>
<html data-ng-app="TodoMain">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"/>

    <title>Register</title>
    
</head>
<body>

Wacht tot Registered Event <b>bullet</b> verschijnt, voer channel naam in en klik Register
<hr>
  <input type="text" name="emai" id='emai' placeholder="email">
  <input id="tok" type="text" name="token" >
<hr>  <input type="text" name="server" id='server' placeholder="aws.leisurelyloop.com:8080">
  <input type="submit" value="Register" id='reg' >

<!-- the result of the search will be rendered inside this div -->


    <div id="app-status-div">
	 <p id="devprop">Loading device properties...</p>

        <ul id="app-status-ul">
            <li>Push notification demo</li>
        </ul>
    </div>

	 <div id="result"></div>
    
	<script type="text/javascript" src="js/index.js"></script>

    <script src="Scripts/jquery-1.8.3.min.js"></script>


	<script type="text/javascript" src="phonegap.js"></script>
	<script type="text/javascript" src="PushNotification.js"></script>
	<script type="text/javascript" src="device.js"></script>
	
	
	
	
	<script>
// Attach a submit handler to the form
$( "#reg" ).click(function( event ) {
 
    var term = $( "#emai" ).val(), token = $('#tok').val(), server = $('#server').val();
   
  // Send the data using post
  $.post( 'http://'+server+'/subscribers', { 'token': token, 'proto':'gcm', 'lang':'nl', 'badge': '0'} )
    .done(function( data ) {
    $( "#result" ).append( data );
	
	  $.post('http://'+server+'/subscriber/'+data.id+'/subscriptions/'+term)
  .done(function( data) {
  	$( "#result" ).append( data );
  });

  });
  
});
</script>



<script type="text/javascript">

            appmob.initialize();

 document.addEventListener("deviceready", onDeviceReady, false);
 
  function onDeviceReady() {
        $("#devprop").replaceWith(  'Device Name: '     + device.name     + '<br />' + 
                            'Device Cordova: '  + device.cordova + '<br />' + 
                            'Device Platform: ' + device.platform + '<br />' + 
                            'Device UUID: '     + device.uuid     + '<br />' + 
                            'Device Version: '  + device.version  + '<br /><hr>');
    }
			</script>
</body>
</html>
