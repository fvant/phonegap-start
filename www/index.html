<!DOCTYPE html>
<html data-ng-app="TodoMain">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"/>

    <title>Register</title>
    
</head>
<body>

Wacht tot Registered Event <b>bullet</b> verschijnt, voer topic in en klik Register
Server 
<select id="server">
<option value="aws.leisurelyloop.com:8080">Frank server</option>
<option value="pushdserver-fin.elasticbeanstalk.com">IBR FIN</option>
</select>
  Token <input id="tok" type="text" name="token" readonly>
  <input type="submit" value="Register" id='reg' >
<hr>
 <input type="text" name="events" id='events' placeholder="subscribe op events">
  <input type="submit" value="Subscribe" id='sub' >
<hr>

<!-- the result of the search will be rendered inside this div -->


    <div id="app-status-div">
	 <p id="devprop">Loading device properties...</p>

        <ul id="app-status-ul">
            <li>Push notification demo</li>
        </ul>
    </div>

	 <div id="result"></div>
    
	<script type="text/javascript" src="js/index.js"></script>

    <script src="Scripts/jquery-1.8.3.min.js"></script>


	<script type="text/javascript" src="phonegap.js"></script>
	<script type="text/javascript" src="PushNotification.js"></script>
	<script type="text/javascript" src="device.js"></script>
	
	

    
	
	
	<script>
	
	var subid = 0;
	
// Attach a submit handler to the form
$( "#reg" ).click(function( event ) {
 
 var token = $('#tok').val(), server = $('#server').val();
   
  // Send the data using post
  $.post( 'http://'+server+'/subscribers', { 'token': token, 'proto':'gcm', 'lang':'nl', 'badge': '0'} )
    .done(function( data ) {
    $( "#result" ).append( data );
    subid = data.id;
  });
});

$( "#sub" ).click(function( event ) {
	
	var even = $( "#events" ).val(), server = $('#server').val();
	
	  $.post('http://'+server+'/subscriber/'+subid+'/subscriptions/'+even)
  .done(function( data) {
  	$( "#result" ).append( data );
  });

  });
  
});
</script>



<script type="text/javascript">

 appmob.initialize();

 document.addEventListener("deviceready", onDeviceReady, false);
 
  function onDeviceReady() {
        $("#devprop").replaceWith(  'Device Name: '     + device.name     + '<br />' + 
                            'Device Platform: ' + device.platform + '<br />' + 
                            'Device UUID: '     + device.uuid     + '<br />' + 
                            'Device Version: '  + device.version  + '<br /><hr>');
    }
			</script>
</body>
</html>
